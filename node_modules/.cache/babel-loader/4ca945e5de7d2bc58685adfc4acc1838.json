{"ast":null,"code":"import { ref } from \"vue\";\nimport InfiniteLoading from \"v3-infinite-loading\";\nexport default {\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    let comments = ref([]);\n    let page = 1;\n\n    const load = async $state => {\n      console.log(\"loading...\");\n\n      try {\n        const response = await fetch(\"https://jsonplaceholder.typicode.com/comments?_limit=10&_page=\" + page);\n        const json = await response.json();\n        if (json.length < 10) $state.complete();else {\n          comments.value.push(...json);\n          $state.loaded();\n        }\n        page++;\n      } catch (error) {\n        $state.error();\n      }\n    };\n\n    const __returned__ = {\n      comments,\n      page,\n      load,\n      ref,\n      InfiniteLoading\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"AASE,SAASA,GAAT,QAAoB,KAApB;AACA,OAAOC,eAAP,MAA4B,qBAA5B;;;;;;IAGA,IAAIC,QAAQ,GAAGF,GAAG,CAAC,EAAD,CAAlB;IACA,IAAIG,IAAI,GAAG,CAAX;;IACA,MAAMC,IAAI,GAAG,MAAMC,MAAN,IAAgB;MAC3BC,OAAO,CAACC,GAAR,CAAY,YAAZ;;MAEA,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAC1B,mEAAmEN,IADzC,CAA5B;QAGA,MAAMO,IAAI,GAAG,MAAMF,QAAQ,CAACE,IAAT,EAAnB;QACA,IAAIA,IAAI,CAACC,MAAL,GAAc,EAAlB,EAAsBN,MAAM,CAACO,QAAP,GAAtB,KACK;UACHV,QAAQ,CAACW,KAAT,CAAeC,IAAf,CAAoB,GAAGJ,IAAvB;UACAL,MAAM,CAACU,MAAP;QACD;QACDZ,IAAI;MACL,CAXD,CAWE,OAAOa,KAAP,EAAc;QACdX,MAAM,CAACW,KAAP;MACD;IACF,CAjBD","names":["ref","InfiniteLoading","comments","page","load","$state","console","log","response","fetch","json","length","complete","value","push","loaded","error"],"sources":["/home/realvue/src/views/test.vue"],"sourcesContent":["<template>\n  <div class=\"result\" v-for=\"comment in comments\" :key=\"comment.id\">\n    <div>{{ comment.email }}</div>\n    <div>{{ comment.id }}</div>\n  </div>\n  <InfiniteLoading :comments=\"comments\" @infinite=\"load\" />\n</template>\n\n<script setup>\n  import { ref } from \"vue\";\n  import InfiniteLoading from \"v3-infinite-loading\";\n\n\n  let comments = ref([]);\n  let page = 1;\n  const load = async $state => {\n    console.log(\"loading...\");\n\n    try {\n      const response = await fetch(\n        \"https://jsonplaceholder.typicode.com/comments?_limit=10&_page=\" + page\n      );\n      const json = await response.json();\n      if (json.length < 10) $state.complete();\n      else {\n        comments.value.push(...json);\n        $state.loaded();\n      }\n      page++;\n    } catch (error) {\n      $state.error();\n    }\n  };\n</script>\n\n<style>\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n    text-align: center;\n    color: #2c3e50;\n    margin-top: 60px;\n  }\n\n  .result {\n    display: flex;\n    flex-direction: column;\n    gap: 5px;\n    font-weight: 300;\n    width: 400px;\n    padding: 10px;\n    text-align: center;\n    margin: 0 auto 10px auto;\n    background: #eceef0;\n    border-radius: 10px;\n  }\n</style>"]},"metadata":{},"sourceType":"module"}