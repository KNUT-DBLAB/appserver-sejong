{"ast":null,"code":"import { withDirectives as _withDirectives, resolveDirective as _resolveDirective, vShow as _vShow, Fragment as _Fragment, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\"; // Styles\n\nimport \"./VOverlay.css\"; // Composables\n\nimport { makeActivatorProps, useActivator } from \"./useActivator.mjs\";\nimport { makePositionStrategyProps, usePositionStrategies } from \"./positionStrategies.mjs\";\nimport { makeScrollStrategyProps, useScrollStrategies } from \"./scrollStrategies.mjs\";\nimport { makeThemeProps, provideTheme } from \"../../composables/theme.mjs\";\nimport { makeTransitionProps, MaybeTransition } from \"../../composables/transition.mjs\";\nimport { useBackButton } from \"../../composables/router.mjs\";\nimport { useBackgroundColor } from \"../../composables/color.mjs\";\nimport { useProxiedModel } from \"../../composables/proxiedModel.mjs\";\nimport { useRtl } from \"../../composables/rtl.mjs\";\nimport { useTeleport } from \"../../composables/teleport.mjs\";\nimport { makeDimensionProps, useDimension } from \"../../composables/dimensions.mjs\";\nimport { makeLazyProps, useLazy } from \"../../composables/lazy.mjs\";\nimport { useStack } from \"../../composables/stack.mjs\"; // Directives\n\nimport { ClickOutside } from \"../../directives/click-outside/index.mjs\"; // Utilities\n\nimport { convertToUnit, genericComponent, getScrollParent, IN_BROWSER, standardEasing, useRender } from \"../../util/index.mjs\";\nimport { computed, mergeProps, ref, Teleport, toHandlers, Transition, watch } from 'vue'; // Types\n\nfunction Scrim(props) {\n  const {\n    modelValue,\n    color,\n    ...rest\n  } = props;\n  return _createVNode(Transition, {\n    \"name\": \"fade-transition\",\n    \"appear\": true\n  }, {\n    default: () => [props.modelValue && _createVNode(\"div\", _mergeProps({\n      \"class\": ['v-overlay__scrim', props.color.backgroundColorClasses.value],\n      \"style\": props.color.backgroundColorStyles.value\n    }, rest), null)]\n  });\n}\n\nexport const VOverlay = genericComponent()({\n  name: 'VOverlay',\n  directives: {\n    ClickOutside\n  },\n  inheritAttrs: false,\n  props: {\n    absolute: Boolean,\n    attach: [Boolean, String, Object],\n    contained: Boolean,\n    contentClass: null,\n    noClickAnimation: Boolean,\n    modelValue: Boolean,\n    persistent: Boolean,\n    scrim: {\n      type: [String, Boolean],\n      default: true\n    },\n    ...makeActivatorProps(),\n    ...makeDimensionProps(),\n    ...makePositionStrategyProps(),\n    ...makeScrollStrategyProps(),\n    ...makeThemeProps(),\n    ...makeTransitionProps(),\n    ...makeLazyProps()\n  },\n  emits: {\n    'click:outside': e => true,\n    'update:modelValue': value => true,\n    afterLeave: () => true\n  },\n\n  setup(props, _ref) {\n    let {\n      slots,\n      attrs,\n      emit\n    } = _ref;\n    const isActive = useProxiedModel(props, 'modelValue');\n    const {\n      teleportTarget\n    } = useTeleport(computed(() => props.attach || props.contained));\n    const {\n      themeClasses\n    } = provideTheme(props);\n    const {\n      rtlClasses\n    } = useRtl();\n    const {\n      hasContent,\n      onAfterLeave\n    } = useLazy(props, isActive);\n    const scrimColor = useBackgroundColor(computed(() => {\n      return typeof props.scrim === 'string' ? props.scrim : null;\n    }));\n    const {\n      isTop\n    } = useStack(isActive);\n    const {\n      activatorEl,\n      activatorRef,\n      activatorEvents,\n      contentEvents\n    } = useActivator(props, {\n      isActive,\n      isTop\n    });\n    const {\n      dimensionStyles\n    } = useDimension(props);\n    const root = ref();\n    const contentEl = ref();\n    const {\n      contentStyles,\n      updatePosition\n    } = usePositionStrategies(props, {\n      contentEl,\n      activatorEl,\n      isActive\n    });\n    useScrollStrategies(props, {\n      root,\n      contentEl,\n      activatorEl,\n      isActive,\n      updatePosition\n    });\n\n    function onClickOutside(e) {\n      emit('click:outside', e);\n      if (!props.persistent) isActive.value = false;else animateClick();\n    }\n\n    function closeConditional() {\n      return isActive.value && isTop.value;\n    }\n\n    IN_BROWSER && watch(isActive, val => {\n      if (val) {\n        window.addEventListener('keydown', onKeydown);\n      } else {\n        window.removeEventListener('keydown', onKeydown);\n      }\n    }, {\n      immediate: true\n    });\n\n    function onKeydown(e) {\n      if (e.key === 'Escape' && isTop.value) {\n        if (!props.persistent) {\n          isActive.value = false;\n        } else animateClick();\n      }\n    }\n\n    useBackButton(next => {\n      if (isTop.value && isActive.value) {\n        next(false);\n        if (!props.persistent) isActive.value = false;else animateClick();\n      } else {\n        next();\n      }\n    });\n    const top = ref();\n    watch(() => isActive.value && (props.absolute || props.contained) && teleportTarget.value == null, val => {\n      if (val) {\n        const scrollParent = getScrollParent(root.value);\n\n        if (scrollParent && scrollParent !== document.scrollingElement) {\n          top.value = scrollParent.scrollTop;\n        }\n      }\n    }); // Add a quick \"bounce\" animation to the content\n\n    function animateClick() {\n      var _contentEl$value;\n\n      if (props.noClickAnimation) return;\n      (_contentEl$value = contentEl.value) == null ? void 0 : _contentEl$value.animate([{\n        transformOrigin: 'center'\n      }, {\n        transform: 'scale(1.03)'\n      }, {\n        transformOrigin: 'center'\n      }], {\n        duration: 150,\n        easing: standardEasing\n      });\n    }\n\n    useRender(() => {\n      var _slots$activator, _slots$default;\n\n      return _createVNode(_Fragment, null, [(_slots$activator = slots.activator) == null ? void 0 : _slots$activator.call(slots, {\n        isActive: isActive.value,\n        props: mergeProps({\n          ref: activatorRef\n        }, toHandlers(activatorEvents.value), props.activatorProps)\n      }), IN_BROWSER && _createVNode(Teleport, {\n        \"disabled\": !teleportTarget.value,\n        \"to\": teleportTarget.value\n      }, {\n        default: () => [hasContent.value && _createVNode(\"div\", _mergeProps({\n          \"class\": ['v-overlay', {\n            'v-overlay--absolute': props.absolute || props.contained,\n            'v-overlay--active': isActive.value,\n            'v-overlay--contained': props.contained\n          }, themeClasses.value, rtlClasses.value],\n          \"style\": {\n            top: convertToUnit(top.value)\n          },\n          \"ref\": root\n        }, attrs), [_createVNode(Scrim, {\n          \"color\": scrimColor,\n          \"modelValue\": isActive.value && !!props.scrim\n        }, null), _createVNode(MaybeTransition, {\n          \"appear\": true,\n          \"persisted\": true,\n          \"transition\": props.transition,\n          \"target\": activatorEl.value,\n          \"onAfterLeave\": () => {\n            onAfterLeave();\n            emit('afterLeave');\n          }\n        }, {\n          default: () => [_withDirectives(_createVNode(\"div\", _mergeProps({\n            \"ref\": contentEl,\n            \"class\": ['v-overlay__content', props.contentClass],\n            \"style\": [dimensionStyles.value, contentStyles.value]\n          }, toHandlers(contentEvents.value)), [(_slots$default = slots.default) == null ? void 0 : _slots$default.call(slots, {\n            isActive\n          })]), [[_vShow, isActive.value], [_resolveDirective(\"click-outside\"), {\n            handler: onClickOutside,\n            closeConditional,\n            include: () => [activatorEl.value]\n          }]])]\n        })])]\n      })]);\n    });\n    return {\n      animateClick,\n      contentEl,\n      activatorEl,\n      isTop,\n      updatePosition\n    };\n  }\n\n});","map":{"version":3,"mappings":"gMAAA;;AACA,wB,CAEA;;SACSA,oBAAoBC,oB;SACpBC,2BAA2BC,6B;SAC3BC,yBAAyBC,2B;SACzBC,gBAAgBC,oB;SAChBC,qBAAqBC,uB;SACrBC,qB;SACAC,0B;SACAC,uB;SACAC,c;SACAC,mB;SACAC,oBAAoBC,oB;SACpBC,eAAeC,e;SACfC,gB,+BAET;;SACSC,oB,4CAET;;SAEEC,eACAC,kBACAC,iBACAC,YACAC,gBACAC,iB;AAEF,SACEC,QADF,EAEEC,UAFF,EAGEC,GAHF,EAIEC,QAJF,EAKEC,UALF,EAMEC,UANF,EAOEC,KAPF,QAQO,KARP,C,CAUA;;AAUA,SAASC,KAAT,CAAgBC,KAAhB,EAAmC;EACjC,MAAM;IAAEC,UAAF;IAAcC,KAAd;IAAqB,GAAGC;EAAxB,IAAiCH,KAAvC;EACA;IAAA,QACmB,iBADnB;IAAA;EAAA;IAAAI,gBAEMJ,KAAK,CAACC,UAAND;MAAA,SAES,CACL,kBADK,EAELA,KAAK,CAACE,KAANF,CAAYK,sBAAZL,CAAmCM,KAF9B,CAFT;MAAA,SAMUN,KAAK,CAACE,KAANF,CAAYO,qBAAZP,CAAkCM;IAN5C,GAOOH,IAPP,QAFN;EAAA;AAcD;;AAOD,OAAO,MAAMK,QAAQ,GAAGrB,gBAAgB,GAEnC;EACHsB,IAAI,EAAE,UADH;EAGHC,UAAU,EAAE;IAAEzB;EAAF,CAHT;EAKH0B,YAAY,EAAE,KALX;EAOHX,KAAK,EAAE;IACLY,QAAQ,EAAEC,OADL;IAELC,MAAM,EAAE,CAACD,OAAD,EAAUE,MAAV,EAAkBC,MAAlB,CAFH;IAGLC,SAAS,EAAEJ,OAHN;IAILK,YAAY,EAAE,IAJT;IAKLC,gBAAgB,EAAEN,OALb;IAMLZ,UAAU,EAAEY,OANP;IAOLO,UAAU,EAAEP,OAPP;IAQLQ,KAAK,EAAE;MACLC,IAAI,EAAE,CAACP,MAAD,EAASF,OAAT,CADD;MAELT,OAAO,EAAE;IAFJ,CARF;IAaL,GAAGvC,kBAAkB,EAbhB;IAcL,GAAGe,kBAAkB,EAdhB;IAeL,GAAGb,yBAAyB,EAfvB;IAgBL,GAAGE,uBAAuB,EAhBrB;IAiBL,GAAGE,cAAc,EAjBZ;IAkBL,GAAGE,mBAAmB,EAlBjB;IAmBL,GAAGS,aAAa;EAnBX,CAPJ;EA6BHyC,KAAK,EAAE;IACL,iBAAkBC,CAAD,IAAmB,IAD/B;IAEL,qBAAsBlB,KAAD,IAAoB,IAFpC;IAGLmB,UAAU,EAAE,MAAM;EAHb,CA7BJ;;EAmCHC,KAAK,CAAE1B,KAAF,QAAiC;IAAA,IAAxB;MAAE2B,KAAF;MAASC,KAAT;MAAgBC;IAAhB,IAAwBC;IACpC,MAAMC,QAAQ,GAAGtD,eAAe,CAACuB,KAAD,EAAQ,YAAR,CAAhC;IACA,MAAM;MAAEgC;IAAF,IAAqBrD,WAAW,CAACa,QAAQ,CAAC,MAAMQ,KAAK,CAACc,MAANd,IAAgBA,KAAK,CAACiB,SAA7B,CAAT,CAAtC;IACA,MAAM;MAAEgB;IAAF,IAAmB7D,YAAY,CAAC4B,KAAD,CAArC;IACA,MAAM;MAAEkC;IAAF,IAAiBxD,MAAM,EAA7B;IACA,MAAM;MAAEyD,UAAF;MAAcC;IAAd,IAA+BrD,OAAO,CAACiB,KAAD,EAAQ+B,QAAR,CAA5C;IACA,MAAMM,UAAU,GAAG7D,kBAAkB,CAACgB,QAAQ,CAAC,MAAM;MACnD,OAAO,OAAOQ,KAAK,CAACqB,KAAb,KAAuB,QAAvB,GAAkCrB,KAAK,CAACqB,KAAxC,GAAgD,IAAvD;IAD4C,EAAT,CAArC;IAGA,MAAM;MAAEiB;IAAF,IAAYtD,QAAQ,CAAC+C,QAAD,CAA1B;IACA,MAAM;MAAEQ,WAAF;MAAeC,YAAf;MAA6BC,eAA7B;MAA8CC;IAA9C,IAAgE5E,YAAY,CAACkC,KAAD,EAAQ;MAAE+B,QAAF;MAAYO;IAAZ,CAAR,CAAlF;IACA,MAAM;MAAEK;IAAF,IAAsB9D,YAAY,CAACmB,KAAD,CAAxC;IAEA,MAAM4C,IAAI,GAAGlD,GAAG,EAAhB;IACA,MAAMmD,SAAS,GAAGnD,GAAG,EAArB;IACA,MAAM;MAAEoD,aAAF;MAAiBC;IAAjB,IAAoC/E,qBAAqB,CAACgC,KAAD,EAAQ;MACrE6C,SADqE;MAErEN,WAFqE;MAGrER;IAHqE,CAAR,CAA/D;IAKA7D,mBAAmB,CAAC8B,KAAD,EAAQ;MACzB4C,IADyB;MAEzBC,SAFyB;MAGzBN,WAHyB;MAIzBR,QAJyB;MAKzBgB;IALyB,CAAR,CAAnB7E;;IAQA,SAAS8E,cAAT,CAAyBxB,CAAzB,EAAwC;MACtCK,IAAI,CAAC,eAAD,EAAkBL,CAAlB,CAAJK;MAEA,IAAI,CAAC7B,KAAK,CAACoB,UAAX,EAAuBW,QAAQ,CAACzB,KAATyB,GAAiB,KAAjBA,CAAvB,KACKkB,YAAY;IAClB;;IAED,SAASC,gBAAT,GAA6B;MAC3B,OAAOnB,QAAQ,CAACzB,KAATyB,IAAkBO,KAAK,CAAChC,KAA/B;IACD;;IAEDjB,UAAU,IAAIS,KAAK,CAACiC,QAAD,EAAWoB,GAAG,IAAI;MACnC,IAAIA,GAAJ,EAAS;QACPC,MAAM,CAACC,gBAAPD,CAAwB,SAAxBA,EAAmCE,SAAnCF;MADF,OAEO;QACLA,MAAM,CAACG,mBAAPH,CAA2B,SAA3BA,EAAsCE,SAAtCF;MACD;IALgB,GAMhB;MAAEI,SAAS,EAAE;IAAb,CANgB,CAAnBnE;;IAQA,SAASiE,SAAT,CAAoB9B,CAApB,EAAsC;MACpC,IAAIA,CAAC,CAACiC,GAAFjC,KAAU,QAAVA,IAAsBc,KAAK,CAAChC,KAAhC,EAAuC;QACrC,IAAI,CAACN,KAAK,CAACoB,UAAX,EAAuB;UACrBW,QAAQ,CAACzB,KAATyB,GAAiB,KAAjBA;QADF,OAEOkB,YAAY;MACpB;IACF;;IAED1E,aAAa,CAACmF,IAAI,IAAI;MACpB,IAAIpB,KAAK,CAAChC,KAANgC,IAAeP,QAAQ,CAACzB,KAA5B,EAAmC;QACjCoD,IAAI,CAAC,KAAD,CAAJA;QACA,IAAI,CAAC1D,KAAK,CAACoB,UAAX,EAAuBW,QAAQ,CAACzB,KAATyB,GAAiB,KAAjBA,CAAvB,KACKkB,YAAY;MAHnB,OAIO;QACLS,IAAI;MACL;IAPU,EAAbnF;IAUA,MAAMoF,GAAG,GAAGjE,GAAG,EAAf;IACAI,KAAK,CAAC,MAAMiC,QAAQ,CAACzB,KAATyB,KAAmB/B,KAAK,CAACY,QAANZ,IAAkBA,KAAK,CAACiB,SAA3Cc,KAAyDC,cAAc,CAAC1B,KAAf0B,IAAwB,IAAxF,EAA8FmB,GAAG,IAAI;MACxG,IAAIA,GAAJ,EAAS;QACP,MAAMS,YAAY,GAAGxE,eAAe,CAACwD,IAAI,CAACtC,KAAN,CAApC;;QACA,IAAIsD,YAAY,IAAIA,YAAY,KAAKC,QAAQ,CAACC,gBAA9C,EAAgE;UAC9DH,GAAG,CAACrD,KAAJqD,GAAYC,YAAY,CAACG,SAAzBJ;QACD;MACF;IANE,EAAL7D,CAlEoC,CA2EpC;;IACA,SAASmD,YAAT,GAAyB;MAAA;;MACvB,IAAIjD,KAAK,CAACmB,gBAAV,EAA4B;MAE5B,6BAAS,CAACb,KAAV,sCAAiB0D,OAAjB,CAAyB,CACvB;QAAEC,eAAe,EAAE;MAAnB,CADuB,EAEvB;QAAEC,SAAS,EAAE;MAAb,CAFuB,EAGvB;QAAED,eAAe,EAAE;MAAnB,CAHuB,CAAzB,EAIG;QACDE,QAAQ,EAAE,GADT;QAEDC,MAAM,EAAE9E;MAFP,CAJH;IAQD;;IAEDC,SAAS,CAAC;MAAA;;MAAA,0DAEJoC,KAAK,CAAC0C,SAFF,qBAEJC,6BAAkB;QAClBvC,QAAQ,EAAEA,QAAQ,CAACzB,KADD;QAElBN,KAAK,EAAEP,UAAU,CAAC;UAChBC,GAAG,EAAE8C;QADW,CAAD,EAEd5C,UAAU,CAAC6C,eAAe,CAACnC,KAAjB,CAFI,EAEqBN,KAAK,CAACuE,cAF3B;MAFC,CAAlB,CAFI,EASJlF,UAAU;QAAA,YAEG,CAAC2C,cAAc,CAAC1B,KAFnB;QAAA,MAGH0B,cAAc,CAAC1B;MAHZ;QAAAF,gBAKN+B,UAAU,CAAC7B,KAAX6B;UAAA,SAES,CACL,WADK,EAEL;YACE,uBAAuBnC,KAAK,CAACY,QAANZ,IAAkBA,KAAK,CAACiB,SADjD;YAEE,qBAAqBc,QAAQ,CAACzB,KAFhC;YAGE,wBAAwBN,KAAK,CAACiB;UAHhC,CAFK,EAOLgB,YAAY,CAAC3B,KAPR,EAQL4B,UAAU,CAAC5B,KARN,CAFT;UAAA,SAYS;YACLqD,GAAG,EAAEzE,aAAa,CAACyE,GAAG,CAACrD,KAAL;UADb,CAZT;UAAA,OAeQsC;QAfR,GAgBMhB,KAhBN;UAAA,SAmBYS,UAnBZ;UAAA,cAoBiBN,QAAQ,CAACzB,KAATyB,IAAkB,CAAC,CAAC/B,KAAK,CAACqB;QApB3C;UAAA;UAAA;UAAA,cAyBiBrB,KAAK,CAACwE,UAzBvB;UAAA,UA0BajC,WAAW,CAACjC,KA1BzB;UAAA,gBA2BkB,MAAM;YAAE8B,YAAY;YAAIP,IAAI,CAAC,YAAD,CAAJA;UAAoB;QA3B9D;UAAAzB;YAAA,OA8BYyC,SA9BZ;YAAA,SAiCa,CACL,oBADK,EAEL7C,KAAK,CAACkB,YAFD,CAjCb;YAAA,SAqCa,CACLyB,eAAe,CAACrC,KADX,EAELwC,aAAa,CAACxC,KAFT;UArCb,GAyCWV,UAAU,CAAC8C,aAAa,CAACpC,KAAf,CAzCrB,sBA2CQqB,KAAK,CAACvB,OA3Cd,qBA2CQqE,2BAAgB;YAAE1C;UAAF,CAAhB,CA3CR,cA+BeA,QAAQ,CAACzB,KA/BxB,wCAgCuB;YAAEoE,OAAO,EAAE1B,cAAX;YAA2BE,gBAA3B;YAA6CyB,OAAO,EAAE,MAAM,CAACpC,WAAW,CAACjC,KAAb;UAA5D,CAhCvB;QAAA,IALM;MAAA,EATN;IAAD,EAATf;IAmEA,OAAO;MACL0D,YADK;MAELJ,SAFK;MAGLN,WAHK;MAILD,KAJK;MAKLS;IALK,CAAP;EAOD;;AAtME,CAFmC,CAAjC","names":["makeActivatorProps","useActivator","makePositionStrategyProps","usePositionStrategies","makeScrollStrategyProps","useScrollStrategies","makeThemeProps","provideTheme","makeTransitionProps","MaybeTransition","useBackButton","useBackgroundColor","useProxiedModel","useRtl","useTeleport","makeDimensionProps","useDimension","makeLazyProps","useLazy","useStack","ClickOutside","convertToUnit","genericComponent","getScrollParent","IN_BROWSER","standardEasing","useRender","computed","mergeProps","ref","Teleport","toHandlers","Transition","watch","Scrim","props","modelValue","color","rest","default","backgroundColorClasses","value","backgroundColorStyles","VOverlay","name","directives","inheritAttrs","absolute","Boolean","attach","String","Object","contained","contentClass","noClickAnimation","persistent","scrim","type","emits","e","afterLeave","setup","slots","attrs","emit","_ref","isActive","teleportTarget","themeClasses","rtlClasses","hasContent","onAfterLeave","scrimColor","isTop","activatorEl","activatorRef","activatorEvents","contentEvents","dimensionStyles","root","contentEl","contentStyles","updatePosition","onClickOutside","animateClick","closeConditional","val","window","addEventListener","onKeydown","removeEventListener","immediate","key","next","top","scrollParent","document","scrollingElement","scrollTop","animate","transformOrigin","transform","duration","easing","activator","_slots$activator","activatorProps","transition","_slots$default","handler","include"],"sources":["../../../src/components/VOverlay/VOverlay.tsx"],"sourcesContent":["// Styles\nimport './VOverlay.sass'\n\n// Composables\nimport { makeActivatorProps, useActivator } from './useActivator'\nimport { makePositionStrategyProps, usePositionStrategies } from './positionStrategies'\nimport { makeScrollStrategyProps, useScrollStrategies } from './scrollStrategies'\nimport { makeThemeProps, provideTheme } from '@/composables/theme'\nimport { makeTransitionProps, MaybeTransition } from '@/composables/transition'\nimport { useBackButton } from '@/composables/router'\nimport { useBackgroundColor } from '@/composables/color'\nimport { useProxiedModel } from '@/composables/proxiedModel'\nimport { useRtl } from '@/composables/rtl'\nimport { useTeleport } from '@/composables/teleport'\nimport { makeDimensionProps, useDimension } from '@/composables/dimensions'\nimport { makeLazyProps, useLazy } from '@/composables/lazy'\nimport { useStack } from '@/composables/stack'\n\n// Directives\nimport { ClickOutside } from '@/directives/click-outside'\n\n// Utilities\nimport {\n  convertToUnit,\n  genericComponent,\n  getScrollParent,\n  IN_BROWSER,\n  standardEasing,\n  useRender,\n} from '@/util'\nimport {\n  computed,\n  mergeProps,\n  ref,\n  Teleport,\n  toHandlers,\n  Transition,\n  watch,\n} from 'vue'\n\n// Types\nimport type { PropType, Ref } from 'vue'\nimport type { MakeSlots } from '@/util'\nimport type { BackgroundColorData } from '@/composables/color'\n\ninterface ScrimProps {\n  [key: string]: unknown\n  modelValue: boolean\n  color: BackgroundColorData\n}\nfunction Scrim (props: ScrimProps) {\n  const { modelValue, color, ...rest } = props\n  return (\n    <Transition name=\"fade-transition\" appear>\n      { props.modelValue && (\n        <div\n          class={[\n            'v-overlay__scrim',\n            props.color.backgroundColorClasses.value,\n          ]}\n          style={ props.color.backgroundColorStyles.value }\n          { ...rest }\n        />\n      )}\n    </Transition>\n  )\n}\n\nexport type OverlaySlots = MakeSlots<{\n  default: [{ isActive: Ref<boolean> }]\n  activator: [{ isActive: boolean, props: Record<string, any> }]\n}>\n\nexport const VOverlay = genericComponent<new () => {\n  $slots: OverlaySlots\n}>()({\n  name: 'VOverlay',\n\n  directives: { ClickOutside },\n\n  inheritAttrs: false,\n\n  props: {\n    absolute: Boolean,\n    attach: [Boolean, String, Object] as PropType<boolean | string | Element>,\n    contained: Boolean,\n    contentClass: null,\n    noClickAnimation: Boolean,\n    modelValue: Boolean,\n    persistent: Boolean,\n    scrim: {\n      type: [String, Boolean],\n      default: true,\n    },\n\n    ...makeActivatorProps(),\n    ...makeDimensionProps(),\n    ...makePositionStrategyProps(),\n    ...makeScrollStrategyProps(),\n    ...makeThemeProps(),\n    ...makeTransitionProps(),\n    ...makeLazyProps(),\n  },\n\n  emits: {\n    'click:outside': (e: MouseEvent) => true,\n    'update:modelValue': (value: boolean) => true,\n    afterLeave: () => true,\n  },\n\n  setup (props, { slots, attrs, emit }) {\n    const isActive = useProxiedModel(props, 'modelValue')\n    const { teleportTarget } = useTeleport(computed(() => props.attach || props.contained))\n    const { themeClasses } = provideTheme(props)\n    const { rtlClasses } = useRtl()\n    const { hasContent, onAfterLeave } = useLazy(props, isActive)\n    const scrimColor = useBackgroundColor(computed(() => {\n      return typeof props.scrim === 'string' ? props.scrim : null\n    }))\n    const { isTop } = useStack(isActive)\n    const { activatorEl, activatorRef, activatorEvents, contentEvents } = useActivator(props, { isActive, isTop })\n    const { dimensionStyles } = useDimension(props)\n\n    const root = ref<HTMLElement>()\n    const contentEl = ref<HTMLElement>()\n    const { contentStyles, updatePosition } = usePositionStrategies(props, {\n      contentEl,\n      activatorEl,\n      isActive,\n    })\n    useScrollStrategies(props, {\n      root,\n      contentEl,\n      activatorEl,\n      isActive,\n      updatePosition,\n    })\n\n    function onClickOutside (e: MouseEvent) {\n      emit('click:outside', e)\n\n      if (!props.persistent) isActive.value = false\n      else animateClick()\n    }\n\n    function closeConditional () {\n      return isActive.value && isTop.value\n    }\n\n    IN_BROWSER && watch(isActive, val => {\n      if (val) {\n        window.addEventListener('keydown', onKeydown)\n      } else {\n        window.removeEventListener('keydown', onKeydown)\n      }\n    }, { immediate: true })\n\n    function onKeydown (e: KeyboardEvent) {\n      if (e.key === 'Escape' && isTop.value) {\n        if (!props.persistent) {\n          isActive.value = false\n        } else animateClick()\n      }\n    }\n\n    useBackButton(next => {\n      if (isTop.value && isActive.value) {\n        next(false)\n        if (!props.persistent) isActive.value = false\n        else animateClick()\n      } else {\n        next()\n      }\n    })\n\n    const top = ref<number>()\n    watch(() => isActive.value && (props.absolute || props.contained) && teleportTarget.value == null, val => {\n      if (val) {\n        const scrollParent = getScrollParent(root.value)\n        if (scrollParent && scrollParent !== document.scrollingElement) {\n          top.value = scrollParent.scrollTop\n        }\n      }\n    })\n\n    // Add a quick \"bounce\" animation to the content\n    function animateClick () {\n      if (props.noClickAnimation) return\n\n      contentEl.value?.animate([\n        { transformOrigin: 'center' },\n        { transform: 'scale(1.03)' },\n        { transformOrigin: 'center' },\n      ], {\n        duration: 150,\n        easing: standardEasing,\n      })\n    }\n\n    useRender(() => (\n      <>\n        { slots.activator?.({\n          isActive: isActive.value,\n          props: mergeProps({\n            ref: activatorRef,\n          }, toHandlers(activatorEvents.value), props.activatorProps),\n        }) }\n\n        { IN_BROWSER && (\n          <Teleport\n            disabled={ !teleportTarget.value }\n            to={ teleportTarget.value }\n          >\n            { hasContent.value && (\n              <div\n                class={[\n                  'v-overlay',\n                  {\n                    'v-overlay--absolute': props.absolute || props.contained,\n                    'v-overlay--active': isActive.value,\n                    'v-overlay--contained': props.contained,\n                  },\n                  themeClasses.value,\n                  rtlClasses.value,\n                ]}\n                style={{\n                  top: convertToUnit(top.value),\n                }}\n                ref={ root }\n                {...attrs}\n              >\n                <Scrim\n                  color={ scrimColor }\n                  modelValue={ isActive.value && !!props.scrim }\n                />\n                <MaybeTransition\n                  appear\n                  persisted\n                  transition={ props.transition }\n                  target={ activatorEl.value }\n                  onAfterLeave={() => { onAfterLeave(); emit('afterLeave') }}\n                >\n                  <div\n                    ref={ contentEl }\n                    v-show={ isActive.value }\n                    v-click-outside={{ handler: onClickOutside, closeConditional, include: () => [activatorEl.value] }}\n                    class={[\n                      'v-overlay__content',\n                      props.contentClass,\n                    ]}\n                    style={[\n                      dimensionStyles.value,\n                      contentStyles.value,\n                    ]}\n                    { ...toHandlers(contentEvents.value) }\n                  >\n                    { slots.default?.({ isActive }) }\n                  </div>\n                </MaybeTransition>\n              </div>\n            )}\n          </Teleport>\n        ) }\n      </>\n    ))\n\n    return {\n      animateClick,\n      contentEl,\n      activatorEl,\n      isTop,\n      updatePosition,\n    }\n  },\n})\n\nexport type VOverlay = InstanceType<typeof VOverlay>\n"]},"metadata":{},"sourceType":"module"}